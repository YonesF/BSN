<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuksusEiendom Slider - React Version</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM via CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // Chevron Icons as SVG components
        const ChevronLeft = () => (
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        );

        const ChevronRight = () => (
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );

        const Sparkles = () => (
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
        );

        // Main Slider Component
        const LuxuryBeforeAfter = ({ beforeImage, afterImage }) => {
            const [sliderPosition, setSliderPosition] = useState(0);
            const [isDragging, setIsDragging] = useState(false);
            const [isHovered, setIsHovered] = useState(false);
            const containerRef = useRef(null);

            // Intro animation
            useEffect(() => {
                let start = 0;
                const end = 50;
                const duration = 1500;
                const startTime = performance.now();

                const animate = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeOut = 1 - Math.pow(1 - progress, 4);
                    
                    setSliderPosition(start + (end - start) * easeOut);

                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                };

                const timer = setTimeout(() => {
                    requestAnimationFrame(animate);
                }, 500);

                return () => clearTimeout(timer);
            }, []);

            const handleMove = useCallback((clientX) => {
                if (containerRef.current) {
                    const rect = containerRef.current.getBoundingClientRect();
                    const x = clientX - rect.left;
                    const width = rect.width;
                    const newPos = Math.max(0, Math.min(100, (x / width) * 100));
                    setSliderPosition(newPos);
                }
            }, []);

            // Global event listeners
            useEffect(() => {
                const handleMouseUp = () => setIsDragging(false);
                const handleMouseMove = (e) => {
                    if (isDragging) handleMove(e.clientX);
                };
                const handleTouchEnd = () => setIsDragging(false);
                const handleTouchMove = (e) => {
                    if (isDragging) handleMove(e.touches[0].clientX);
                };

                window.addEventListener('mouseup', handleMouseUp);
                window.addEventListener('mousemove', handleMouseMove);
                window.addEventListener('touchend', handleTouchEnd);
                window.addEventListener('touchmove', handleTouchMove);

                return () => {
                    window.removeEventListener('mouseup', handleMouseUp);
                    window.removeEventListener('mousemove', handleMouseMove);
                    window.removeEventListener('touchend', handleTouchEnd);
                    window.removeEventListener('touchmove', handleTouchMove);
                };
            }, [isDragging, handleMove]);

            return (
                <div 
                    ref={containerRef}
                    className="relative w-full aspect-[4/3] md:aspect-[16/9] overflow-hidden shadow-2xl border border-neutral-100 cursor-ew-resize group select-none"
                    onMouseEnter={() => setIsHovered(true)}
                    onMouseLeave={() => setIsHovered(false)}
                    onMouseDown={(e) => handleMove(e.clientX)}
                    onTouchStart={(e) => handleMove(e.touches[0].clientX)}
                >
                    {/* After Image (Background) */}
                    <img
                        src={afterImage}
                        alt="Etter styling"
                        className="absolute inset-0 w-full h-full object-cover"
                        draggable={false}
                    />
                    
                    {/* Label: ETTER */}
                    <div 
                        className={`absolute top-6 right-6 px-4 py-2 bg-black/30 backdrop-blur-md border border-white/20 text-white text-xs font-serif tracking-widest uppercase transition-opacity duration-500 ${sliderPosition > 90 ? 'opacity-0' : 'opacity-100'}`}
                    >
                        <span className="font-bold text-[#c5a059]">Etter</span> Styling
                    </div>

                    {/* Before Image Container (Clipped) */}
                    <div 
                        className="absolute inset-0 overflow-hidden"
                        style={{ 
                            width: `${sliderPosition}%`,
                            boxShadow: '5px 0 30px rgba(0,0,0,0.3)'
                        }}
                    >
                        <img
                            src={beforeImage}
                            alt="Før styling"
                            className="absolute inset-0 h-full object-cover"
                            style={{ 
                                width: containerRef.current ? `${containerRef.current.offsetWidth}px` : '100%'
                            }}
                            draggable={false}
                        />

                        {/* Dark overlay */}
                        <div className="absolute inset-0 bg-neutral-900/20 pointer-events-none" style={{ mixBlendMode: 'multiply' }}></div>

                        {/* Label: FØR */}
                        <div 
                            className={`absolute top-6 left-6 px-4 py-2 bg-white/90 backdrop-blur-md text-neutral-900 text-xs font-serif tracking-widest uppercase shadow-sm transition-opacity duration-500 ${sliderPosition < 10 ? 'opacity-0' : 'opacity-100'}`}
                        >
                            <span className="font-bold text-[#c5a059] mr-1">Før</span> Styling
                        </div>
                    </div>

                    {/* Slider Handle */}
                    <div 
                        className="absolute inset-y-0 w-0.5 bg-white z-20"
                        style={{ left: `${sliderPosition}%` }}
                    >
                        {/* Glow effect */}
                        <div className="absolute inset-y-0 -left-1 w-2 bg-white/30 blur-sm"></div>

                        {/* Handle Button */}
                        <div 
                            className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center cursor-ew-resize transition-transform duration-200 hover:scale-110 active:scale-95"
                            onMouseDown={() => setIsDragging(true)}
                            onTouchStart={() => setIsDragging(true)}
                        >
                            {/* Outer ring */}
                            <div className={`absolute inset-0 rounded-full bg-white/10 backdrop-blur-md border border-white/60 shadow-[0_0_20px_rgba(0,0,0,0.2)] transition-all duration-300 ${isDragging ? 'w-14 h-14 bg-[#c5a059]/20 border-[#c5a059]' : ''}`}></div>
                            
                            {/* Inner circle */}
                            <div className="absolute w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center">
                                <div className="flex text-[#c5a059]">
                                    <ChevronLeft />
                                    <ChevronRight />
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Instruction */}
                    <div className={`absolute bottom-6 left-1/2 -translate-x-1/2 pointer-events-none transition-opacity duration-700 ${isHovered || isDragging ? 'opacity-0' : 'opacity-80'}`}>
                        <div className="flex items-center gap-2 px-4 py-2 bg-black/60 backdrop-blur rounded-full text-white text-[10px] uppercase tracking-widest border border-white/10">
                            <div className="text-[#c5a059]">
                                <Sparkles />
                            </div>
                            <span>Dra for å sammenligne</span>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App
        const App = () => {
            return (
                <div className="min-h-screen bg-white">
                    <section className="py-12 px-6 bg-white">
                        <div className="max-w-6xl mx-auto">
                            {/* Title */}
                            <div className="text-center mb-12">
                                <h3 className="text-3xl font-light font-serif mb-4 text-neutral-900">
                                    Se potensialet
                                </h3>
                                <div className="h-0.5 w-12 bg-[#c5a059] mx-auto mb-4"></div>
                                <p className="text-neutral-500 text-sm tracking-wide uppercase">
                                    Dra slideren for å se effekten av digital styling
                                </p>
                            </div>

                            {/* Slider */}
                            <LuxuryBeforeAfter 
                                beforeImage="54603800-d5a2-4466-b8e1-9880f1748d86.jpg"
                                afterImage="Demo_1_after.png"
                            />
                        </div>
                    </section>
                </div>
            );
        };

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
